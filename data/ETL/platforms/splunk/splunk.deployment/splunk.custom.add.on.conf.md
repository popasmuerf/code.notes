## Splunk Deployment Basics


###  input.conf


This file contains contains possible settings you can use to configure
inputs, distributed inputs such as forwarders, and file system 
monitoring inputs.conf

*   Each stanza controls different serch commands settings
*   $SPLUNK_HOME/etc/system/default/  # Do not edit this file
*   $SPLUNK_HOME/etc/system/local/    # Edits can be made here
*   Splunk must be restarted for any changes to be loaded at runtime
*   Each conf file should have at most one default stanza:
    -   If thre are multiple default stanzas, settings are combined.
    -   In the case of multiple definitions of the same setting,
        the last definition in the file wins
    -   If an setting is defined at both the global level and in a 
        specific stanza, the value in the specific stanza takes precidence







```
[monitor:///var/log]
disabled = false 
index = forwarder

[tcpout:default-autolb-group]
server = 172.17.0.2.9997

[tcpout-server://172.17.0.2:9997]

```


## What the default SplunkFowarder inputs.conf file looks like
```
[root@forwarder-2 splunk]# ls -al /opt/splunkforwarder/etc/apps/search/local/inputs.conf
-rw------- 1 root root 38 Jul 12 19:20 /opt/splunkforwarder/etc/apps/search/local/inputs.conf

[root@forwarder-2 splunk]# cat /opt/splunkforwarder/etc/apps/search/local/inputs.conf
[monitor:///var/log]
disabled = false

```


##what the default SplunkFowarder outputs.conf file looks like
```
[root@forwarder-2 splunk]# ls -l /opt/splunkforwarder/etc/system/local/outputs.conf
-rw------- 1 root root 208 Jul 12 19:35 /opt/splunkforwarder/etc/system/local/outputs.conf

[tcpout]
defaultGroup = default-autolb-group

[tcpout:default-autolb-group]
disabled = false
server = 127.0.0.1:9997,192.168.1.152:9997

[tcpout-server://127.0.0.1:9997]

[tcpout-server://192.168.1.152:9997]




```






## Server Class:

A group of common configuration which is shared by multiple instances

Example:

*   ServerClass "Windows" which is common to all windows servers.
*   Serverclass called "Linux" which is common for all linux servers


Service Classes require the use of a **Deployment App**




## Deployment App

A set of content(eg configuration files) maintained by deployment server
and pushed to the deployment clients belonging to a specific server class


Example:
Deployment app has:

    -   Inputs.conf
        *   Monitors for /var/log/secure and /var/log/audit
    -   This deployment app is associated with "Linux" serverclass







### Server Class and Deployment Apps

Server Class is a group which can contain multiple apps 

----Linux_servers----
-secure-------      |
             |-----------------Only deploy on subnet 10.77.*
-audit--------      |          Exclude 10.77.4.50
---------------------

While installing univeral forwarder, we run certain commands like:

    > ./splunk add monitor /var/log
    > ./splunk add forward-sever 172.17.0.2:9997
    
    
All of this can be manual and can be automated with configuration management tools like
Ansible(this will become a must in an enterpise enviroment...no way you are executing
these commands by hand...)



### Typical Use-Case

Some example use-cases:

Any server which belongs to subnet 192.168.10.0/24 network should have only
    
    /var/log/secure
    
monitored.


Any server which belongs to 10.77.0.0/20 shoud have the following 
monitored

    /var/log/secure
    /var/log/audit


If server hostname starts with **win-**, then integrate it to
send all the windows events and Active Directive logs.....

https://www.xvideos.com/video57361621/naughty_mackerel_angel_lima_fucked_in_the_fur_and_released_the_ass_without_pity_actor_jack_kallahari
